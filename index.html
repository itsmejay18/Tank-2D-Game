<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Steel Dash: Bullet Storm</title>
  <link rel="icon" type="image/png" href="image/favicon.PNG">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/ui.css">
  <link rel="stylesheet" href="css/game.css">
</head>
<body>
  <main class="page">
    <section id="landing" class="panel">
      <div id="titleSection">
        <h1>Steel Dash: Bullet Storm</h1>
        <p class="tagline">
          Steel Dash: Bullet Storm is a fast-paced 2D tank survival game where you dodge bullets, blast enemies, and push your skills to the limit. Use precision movement, tactical dashing, and smart positioning to survive wave after wave of evolving enemies. Collect power-ups, heal up, and master the storm.
        </p>
      </div>
      <p id="statusMessage" class="status hidden"></p>
      <div class="brand-mark">
        <img src="image/favicon.PNG" alt="Steel Dash emblem" class="brand-logo">
      </div>
      <div class="form-group">
        <label for="playerNameInput">Player Name</label>
        <input id="playerNameInput" type="text" maxlength="20" placeholder="Enter your name" required>
      </div>
      <div id="leaderboard" class="panel-sub">
        <div class="leaderboard-header">Top Scores</div>
        <div class="leaderboard-table">
          <div class="leaderboard-row header">
            <span>Rank</span><span>Player</span><span>Score</span>
          </div>
          <div id="leaderboardBody" class="leaderboard-body">Loading...</div>
        </div>
      </div>
      <div class="form-group">
        <label for="map">Map Theme</label>
        <select id="map">
          <option value="city">City (dark)</option>
          <option value="forest">Forest (green)</option>
          <option value="desert">Desert (sandy)</option>
        </select>
      </div>
      <div class="form-group mobile-opt">
        <label for="mobileToggle">Mobile Controls</label>
        <div class="toggle-row">
          <input type="checkbox" id="mobileToggle">
          <span class="toggle-help">Enable on phones/tablets (auto-detected)</span>
        </div>
      </div>
      <button id="customizeBtn" class="secondary">Customize Tank</button>
      <button id="startBtn" class="primary">Start Game</button>
    </section>

    <!-- Tank customization screen -->
    <section id="customizePanel" class="panel hidden">
      <h2 class="title">Customize Your Tank</h2>
      <p class="tagline">Choose your colors and shapes, then return to start.</p>
      <div class="form-group appearance">
        <label>Tank Colors</label>
        <div class="color-row">
          <div class="color-field">
            <span>Body</span>
            <input type="color" id="bodyColor" value="#3adb76" aria-label="Body color">
          </div>
          <div class="color-field">
            <span>Barrel</span>
            <input type="color" id="barrelColor" value="#a8ffd7" aria-label="Barrel color">
          </div>
          <div class="color-field">
            <span>Wheels</span>
            <input type="color" id="wheelColor" value="#1f5138" aria-label="Wheel color">
          </div>
          <div class="color-field">
            <span>Outline</span>
            <input type="color" id="outlineColor" value="#88ffd1" aria-label="Outline color">
          </div>
        </div>
      </div>
      <div class="form-group appearance">
        <label>Tank Shapes</label>
        <div class="shape-row">
          <div class="shape-field">
            <span>Turret</span>
            <select id="turretShape" aria-label="Turret shape">
              <option value="rounded" selected>Rounded</option>
              <option value="square">Square</option>
            </select>
          </div>
          <div class="shape-field">
            <span>Barrel Tip</span>
            <select id="barrelTip" aria-label="Barrel tip shape">
              <option value="standard" selected>Standard</option>
              <option value="wide">Wide</option>
              <option value="spike">Spike</option>
            </select>
          </div>
        </div>
      </div>
      <div class="button-row">
        <button id="customizeBack" class="primary">Save & Return</button>
      </div>
    </section>

    <section id="gameWrapper" class="panel hidden">
      <div class="hud">
        <span class="label">Player:</span>
        <span id="playerDisplay" class="value"></span>
        <span class="label">Map:</span>
        <span id="mapDisplay" class="value"></span>
        <span class="label">Score:</span>
        <span id="scoreDisplay" class="value">0</span>
        <span class="label">Wave:</span>
        <span id="waveDisplay" class="value">1</span>
        <span class="label">Lives:</span>
        <span id="livesDisplay" class="value">3</span>
      </div>
      <div class="health-row">
        <span class="label">Health:</span>
        <div class="health-bar">
          <div id="healthFill" class="health-fill"></div>
        </div>
      </div>
      <div class="power-status">
        <span class="label">Power:</span>
        <span id="powerStatus" class="value">None</span>
        <span class="label">Pierce:</span>
        <span id="pierceTime" class="value">0.0s</span>
      </div>
      <canvas id="gameCanvas" width="900" height="600"></canvas>
      <p class="hint">Move with W A S D (or on-screen pad), aim with mouse/touch, press Shoot. Avoid the red enemy!</p>
      <div id="mobileControls" class="mobile-controls hidden">
        <div id="joystick" class="joystick">
          <div class="joystick-base"></div>
          <div class="joystick-knob"></div>
        </div>
        <div class="action-buttons">
          <button id="shootBtn" class="shoot-btn" aria-label="Shoot">Shoot</button>
          <button id="dashBtn" class="dash-btn" aria-label="Dash">Dash</button>
        </div>
      </div>

    </section>
  </main>

  <!-- Game over modal -->
  <div id="gameOverModal" class="modal hidden">
    <div class="modal-content">
      <h2>Game Over</h2>
      <p id="gameOverText">Game Over, Player! Play again?</p>
      <div class="modal-actions">
        <button id="modalRestart" class="primary">Play Again</button>
        <button id="shareBtn" class="secondary">Copy Share Link</button>
        <button id="modalQuit" class="secondary">Quit to Menu</button>
      </div>
    </div>
  </div>

  <script src="js/utils.js" defer></script>
  <script src="js/controls.js" defer></script>
  <script src="js/player.js" defer></script>
  <script src="js/enemies.js" defer></script>
  <script src="js/physics.js" defer></script>
  <script src="js/game.js" defer></script>
  <script src="js/main.js" defer></script>
  <script type="module" src="js/firebase.js"></script>
  <script type="module" src="js/leaderboard.js"></script>
</body>
</html>

